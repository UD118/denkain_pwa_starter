:root{
  --bg1:#ffeff9;
  --bg2:#eaf6ff;

  --ink:#1c1f2a;
  --muted:#55607a;

  --card: rgba(255,255,255,0.78);
  --line: rgba(20, 30, 60, 0.12);

  --pink:#ff4fa3;
  --purple:#7a5cff;
  --cyan:#00c2ff;
  --ok:#14c77b;
  --ng:#ff3b5c;

  --shadow: 0 14px 28px rgba(22, 34, 66, 0.18);
  --radius: 18px;
}

*{ box-sizing:border-box; }

body{
  margin:0;
  color:var(--ink);
  font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
  background:
    radial-gradient(circle at 12% 10%, rgba(255,79,163,.25) 0 160px, transparent 161px),
    radial-gradient(circle at 85% 18%, rgba(122,92,255,.22) 0 180px, transparent 181px),
    linear-gradient(180deg,var(--bg1),var(--bg2));
}

/* ===== Top ===== */
.topbar{
  position:sticky;
  top:0;
  z-index:10;
  padding:10px 14px;
  display:flex;
  gap:10px;
  justify-content:space-between;
  align-items:center;
  background:rgba(255,255,255,.8);
  backdrop-filter:blur(8px);
  border-bottom:1px solid var(--line);
}

.brand{
  font-weight:900;
}
.brand::before{ content:"⚡ "; }

.selectors{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}

label{
  font-size:12px;
  color:var(--muted);
}

select{
  padding:6px 8px;
  border-radius:10px;
  border:1px solid var(--line);
}

/* ===== Layout ===== */
.container{
  max-width:1000px;
  margin:12px auto;
  padding:0 12px 28px;
  display:grid;
  gap:12px;
}

.card{
  background:var(--card);
  border-radius:var(--radius);
  border:1px solid var(--line);
  padding:12px;
  box-shadow:var(--shadow);
}

/* クイズカードは画面内に収める */
#quizCard{
  max-height:calc(100vh - 120px);
  display:flex;
  flex-direction:column;
  gap:8px;
}

/* ===== Question ===== */
.row{
  display:flex;
  justify-content:space-between;
  font-size:13px;
  color:var(--muted);
}

.question-area{
  display:grid;
  gap:8px;
}

#qimg{
  width:100%;
  max-height:30vh;
  object-fit:contain;
  border-radius:14px;
  border:1px solid var(--line);
  background:white;
}

.qtext{
  font-size:14px;
  line-height:1.5;
  padding:8px 10px;
  border-radius:12px;
  border:1px dashed var(--line);
  background:rgba(255,255,255,.6);
}

/* ===== Choices（ここが本題） ===== */
.choices{
  flex:1 1 auto;
  overflow:auto;

  display:grid;
  grid-template-columns: repeat(2, 1fr); /* ★スマホは2列 */
  gap:8px;
}

/* 選択肢1つの高さを圧縮 */
.choice{
  display:flex;
  gap:8px;
  align-items:center;

  padding:8px 10px; /* ★縦を小さく */
  border-radius:14px;
  border:1px solid var(--line);
  background:white;
  cursor:pointer;

  transition:.1s;
}

.choice:hover{
  border-color:rgba(122,92,255,.4);
}

.choice.selected{
  border-color:var(--pink);
  outline:2px solid rgba(255,79,163,.25);
}

/* 番号バッジもコンパクトに */
.choice .idx{
  width:26px;
  height:26px;
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
  color:white;
  background:linear-gradient(135deg,var(--purple),var(--pink));
  flex-shrink:0;
}

.choice .body{
  font-size:14px;
  line-height:1.4;
}

/* ===== Buttons ===== */
.actions{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}

.sticky-actions{
  position:sticky;
  bottom:0;
  padding-top:8px;
  background:rgba(255,255,255,.85);
  border-top:1px solid var(--line);
}

button{
  padding:10px 14px;
  border-radius:14px;
  border:none;
  font-weight:900;
  cursor:pointer;
  background:linear-gradient(135deg,var(--cyan),var(--purple));
  color:white;
}

button:disabled{
  opacity:.5;
}

button.ghost{
  background:white;
  color:var(--ink);
  border:1px solid var(--line);
}

button.danger{
  background:linear-gradient(135deg,var(--ng),#ff9f43);
}

/* ===== Result ===== */
.result{
  margin-top:6px;
  padding:8px 10px;
  border-radius:12px;
  font-weight:900;
}

.result.ok{
  background:rgba(20,199,123,.15);
  color:#0b6b43;
}

.result.ng{
  background:rgba(255,59,92,.15);
  color:#9b1c30;
}

/* ===== PCでは3列 ===== */
@media (min-width: 900px){
  .question-area{
    grid-template-columns:1.2fr .8fr;
  }
  .choices{
    grid-template-columns: repeat(3, 1fr); /* ★PCは3列 */
  }
  #qimg{ max-height:42vh; }
}
/* ===== Correct / Wrong animations ===== */

/* 正解：光ってポン！ */
.choice.correct{
  border-color: rgba(20,199,123,.9) !important;
  outline: 2px solid rgba(20,199,123,.22);
  box-shadow: 0 12px 26px rgba(20,199,123,.22);
  animation: popGlow .45s ease-out;
}
@keyframes popGlow{
  0%{ transform: scale(1); filter: brightness(1); }
  55%{ transform: scale(1.04); filter: brightness(1.05); }
  100%{ transform: scale(1); filter: brightness(1); }
}

/* 不正解：赤くなってプルプル */
.choice.wrong{
  border-color: rgba(255,59,92,.95) !important;
  outline: 2px solid rgba(255,59,92,.20);
  box-shadow: 0 12px 26px rgba(255,59,92,.18);
  animation: shakeX .35s ease-in-out;
}
@keyframes shakeX{
  0%{ transform: translateX(0); }
  20%{ transform: translateX(-6px); }
  40%{ transform: translateX(6px); }
  60%{ transform: translateX(-4px); }
  80%{ transform: translateX(4px); }
  100%{ transform: translateX(0); }
}

/* 画面全体（カード）演出：正解ならキラッ */
#quizCard.celebrate{
  animation: cardGlow .55s ease-out;
}
@keyframes cardGlow{
  0%{ box-shadow: var(--shadow); }
  40%{ box-shadow: 0 0 0 4px rgba(0,194,255,.18), 0 18px 40px rgba(22,34,66,.18); }
  100%{ box-shadow: var(--shadow); }
}

/* 画面全体（カード）演出：不正解なら軽く揺れる */
#quizCard.shake{
  animation: cardShake .35s ease-in-out;
}
@keyframes cardShake{
  0%{ transform: translateX(0); }
  20%{ transform: translateX(-4px); }
  40%{ transform: translateX(4px); }
  60%{ transform: translateX(-3px); }
  80%{ transform: translateX(3px); }
  100%{ transform: translateX(0); }
}

/* 動きが苦手な人のため（OS設定に従う） */
@media (prefers-reduced-motion: reduce){
  .choice.correct, .choice.wrong, #quizCard.celebrate, #quizCard.shake{
    animation: none !important;
  }
}
